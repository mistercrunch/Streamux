<style type="text/css">
	body{
		font-family:Verdana;
		color:white;
		background-color:grey;
		margin:100px;
    }
    td{
		color:#AAAAAA;
		text-decoration: none;
		font-weight:bold;
    }
	thead td{
		border:0px;
		text-align:center;
		color:white;
	}
	tbody tr:hover{
		background:#333333;
	}
    a:hover{
		color:white;
    }
	div{
		margin:15px;
	}
	#title{
		margin-left: auto ;
		margin-right: auto ;
		text-align:center;
		padding:30px;
		font-size:40px;
		font-weight:bold;
	}
    #main{
		margin-left: auto ;
		margin-right: auto ;
		border-radius: 15px;
		text-align:center;
		width:400px;
		border-style:solid;
		border-width:5px;
		padding:40px;
		background:black;
    }
	#log{
		margin-left: auto ;
		margin-right: auto ;
		border-radius: 15px;
		text-align:center;
		width:600px;
		border-style:solid;
		border-width:5px;
		padding:10px;
		background:black;
		font-size:12px;
    }
	table{
		width:100%;
		border-spacing: 4px;
		border-width:1px;
		border-color:white;
		

	}
	td{
		font-size:12px;
		border-style:solid;
		border-width:1px;
		border-color:grey;
		padding:4px;
		margin:2px;
		border-radius: 5px;
		
	}
</style>
<html>
	<head>
		<title>Streamux</title>
	</head>
	<body>
		<div id="title">Streamux</div>
		<div id="main">
			<table id="main_table">
				<thead>
					<td>IP</td>
					<td>IS_ON</td>
					<td>IS_BCAST</td>
				</thead>
			</table>
		</div>
		<div id="log"></div>
	</body>
</html>

<script type="text/javascript" src="jquery"></script>     
<script language="javascript">
function test(f){
	var mac = $(f).parent().attr('id');
	if ($(f).html()=='False'){
		$.ajax('/mute_node/' + mac);
		//$(f).html('True')
	}
	else{
		$.ajax('/unmute_node/' + mac);
		//$(f).html('False')
	}	
}


$.getJSON('/json_nodes', function(data) {
	var items = [];

	$.each(data, function(key, val) {
		items.push('<tr id="' + key + '"><td>' + val.IP + '</td><td onclick="test(this);">' + val.IS_ON + '</td><td>' + val.IS_BCAST +'</td></tr>');
	});

	$('<tbody/>', {
		html: items.join('')
	}).appendTo('#main_table');
});

$.getJSON('/json_messages', function(data) {
	var items = [];

	$.each(data, function(i, l) {
		items.push(l+'<br>');
	});

	$('#log').html( items.join(''))
	
});
</script>